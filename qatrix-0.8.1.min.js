/*
	Qatrix JavaScript v0.8.1

	Copyright (c) 2012, The Qatrix project, Angel Lai
	The Qatrix project is under MIT license.
	For details, see the Qatrix web site: http://qatrix.com
*/

var Qatrix={version:'0.8.1',rtrim:/(^\s*)|(\s*$)/g,rcamelCase:/-([a-z])/ig,rdigit:/\d/,rvalidchars:/^[\],:{}\s]*$/,rvalidescape:/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens:/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces:/(?:^|:|,)(?:\s*\[)+/g},$=($===undefined)?function(a){return document.getElementById(a)}:$,$each=function(a,b){var i=0,length=a.length,name;if(length===undefined){for(name in a){b.call(a[name],name,a[name])}}else{for(;i<length;++i){b.call(a[i],i,a[i])}}},$tag=function(b,c,d){var e=b.getElementsByTagName(c);if(d){$each(e,function(i,a){d(a)})}return e},$class=(document.getElementsByClassName)?function(b,c,d){var e=b.getElementsByClassName(c);if(d){$each(e,function(i,a){d(a)})}return e}:function(b,c,d){var e=[],rclass=new RegExp('\\b'+c+'\\b'),childs=b.getElementsByTagName('*');$each(childs,function(i,a){if(rclass.test(a.className)){e.push(a)}});if(d){$each(e,function(i,a){d(a)})}return e},$new=function(e,f){var g=document.createElement(e);if(f){$each(f,function(c,d){switch(c){case'css':case'style':$each(d[c],function(a,b){$style.set(g,a,b)});break;case'innerHTML':case'html':$html(g,d);break;case'text':$text(g,d);break;default:g[c]=f[c];break}})}return g},$string={camelCase:function(c){return c.replace(Qatrix.rcamelCase,function(a,b){return(b+'').toUpperCase()})},replace:function(a,b){for(var c in b){a=a.replace(new RegExp(c,'ig'),b[c])}return a},trim:function(a){return a.replace(Qatrix.rtrim,'')}},$attr={get:function(a,b){return a.getAttribute(b)},set:function(a,b,c){return a.setAttribute(b,c)},remove:function(a,b){return a.removeAttribute(b)}},$data={get:function(a,b){var c=$attr.get(a,'data-'+b);return(c===true)?true:(c===false)?false:(c===null)?null:(Qatrix.rdigit.test(c))?parseInt(c):($json.isJSON(c))?$json.decode(c):c},set:function(c,d,e){if(typeof d==='object'){$each(d,function(a,b){$attr.set(c,'data-'+a,b)})}else{$attr.set(c,'data-'+d,e)}},remove:function(a,b){return $attr.remove(a,'data-'+b)}},$cache={data:{},get:function(a){return $cache.data[a]},set:function(a,b){$cache.data[a]=b},inc:function(a){return(typeof $cache.data[a]==='number')?$cache.data[a]++:$cache.data[a]},dec:function(a){return(typeof $cache.data[a]==='number')?$cache.data[a]--:$cache.data[a]},remove:function(a){delete $cache.data[a]},flush:function(){$cache.data={}}},$event={add:function(a,b,c,d){if(d==true){if($data.get(a,'event-'+b)){return false}}$data.set(a,'event-'+b,true);if(b==='mouseenter'||b==='mouseleave'){b=(b==='mouseenter')?'mouseover':'mouseout';handle=$event.handler.mouseenter(c)}if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent('on'+b,c)}},remove:function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false)}else if(a.detachEvent){a.detachEvent('on'+b,c)}$data.remove(a,'event-'+b)},handler:{mouseenter:function(e){return function(c){function is_child(a,b){if(a===b){return false}while(b&&b!==a){b=b.parentNode}return b===a}var d=c.relatedTarget;if(this===d||is_child(this,d)){return}e.call(this,c)}}},key:function(a){if(a.which==null&&(a.charCode!=null||a.keyCode!=null)){a.which=a.charCode!=null?a.charCode:a.keyCode}return a.which},metaKey:function(a){return(!a.metaKey&&a.ctrlKey)?a.ctrlKey:a.metaKey},target:function(a){if(!a.target){a.target=a.srcElement||document}return a.target},mouseOver:function(a,b){if(!a.relatedTarget&&a.fromElement){a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement}var c=a.relatedTarget;while(c&&c!==b){c=c.parentNode}if(c!==b){return true}return false}},$ready=function(a){function checkDOM(){try{window.scrollTo(0,0);a()}catch(e){setTimeout(checkDOM,0);return}}checkDOM()},$clear=function(a){if(a){clearTimeout(a);clearInterval(a)}return null},$css={get:function(a,b){return $style.get(a,b)},set:function(c,d,e){if(typeof d==='object'){$each(d,function(a,b){$style.set(c,$string.camelCase(a),$css.fix(a,b))})}else{$style.set(c,$string.camelCase(d),$css.fix(d,e))}},number:{'fontWeight':true,'lineHeight':true,'opacity':true},unit:function(a,b){if($css.number[a]){return''}var c=b.toString().replace(parseInt(b),'');return(c==''&&!$css.number[a])?'px':c},fix:function(a,b){var c=typeof b;if(c==='number'&&!$css.number[a]){b+='px'}if(b==null&&isNaN(b)){return false}return b}},$style={get:(window.getComputedStyle)?function(a,b){if(a!==null){return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)}}:function(a,b){if(a!==null){if(b=='width'&&a.currentStyle['width']=='auto'){return a.offsetWidth}if(b=='height'&&a.currentStyle['height']=='auto'){return a.offsetHeight}return a.currentStyle[$string.camelCase(b)]}},set:(document.documentElement.style.opacity!==undefined)?function(a,b,c){a.style[b]=c}:function(a,b,c){if(!a.currentStyle||!a.currentStyle.hasLayout){a.style.zoom=1}if(b=='opacity'){a.style.filter='alpha(opacity='+c*100+')'}else{a.style[b]=c}}},$pos=function(a,x,y){$style.set(a,'left',x+'px');$style.set(a,'top',y+'px')},$offset=function(a){var b=a.offsetLeft,top=a.offsetTop,offsetParent=a.offsetParent;while(offsetParent!==null){b+=offsetParent.offsetLeft+offsetParent.clientLeft;top+=offsetParent.offsetTop+offsetParent.clientTop;if(offsetParent!=document.body&&offsetParent!=document.documentElement){b-=offsetParent.scrollLeft;top-=offsetParent.scrollTop}offsetParent=offsetParent.offsetParent}return{top:top,left:b}},$node_content=function(a,b){var c=typeof b;if(c==='string'||c==='number'){var d=a.ownerDocument.createRange();d.setStartBefore(a);return d.createContextualFragment(b)}else{return b}},$append=function(a,b){return a.appendChild($node_content(a,b))},$prepend=function(a,b){return(a.firstChild)?a.insertBefore($node_content(a,b),a.firstChild):a.appendChild($node_content(a,b))},$before=function(a,b){return a.parentNode.insertBefore($node_content(a,b),a)},$after=function(a,b){return(a.nextSibling)?a.parentNode.insertBefore($node_content(a,b),a.nextSibling):a.parentNode.appendChild($node_content(a,b))},$remove=function(a){if(a!=null&&a.parentNode){a.parentNode.removeChild(a)}return a},$empty=function(a){a.innerHTML='';return a},$html=function(a,b){try{a.innerHTML=b}catch(e){$append($empty(a),b)}},$text=function(a,b){$empty(a);a.appendChild(document.createTextNode(b))},$className={add:function(b,c){if(b.className==''){b.className=c}else{if(b.className!=c){var d=b.className.split(/\s+/);$each(d,function(i,a){if(a===c){return false}});d.push(c);b.className=d.join(' ')}}},remove:function(a,b){a.className=(b)?$string.trim(a.className.replace(b,'').split(/\s+/).join(' ')):''}},$hide=function(c){$each(arguments,function(i,b){(typeof b==='string')?$(b).style.display='none':(typeof b==='object'&&b.length)?$each(b,function(i,a){a.style.display='none'}):b.style.display='none'})},$show=function(c){$each(arguments,function(i,b){(typeof b==='string')?$(b).style.display='block':(typeof b==='object'&&b.length)?$each(b,function(i,a){a.style.display='block'}):b.style.display='block'})};$animate=(document.documentElement.style.webkitTransition!==undefined||document.documentElement.style.MozTransition!==undefined||document.documentElement.style.OTransition!==undefined||document.documentElement.style.transition!==undefined)?(function(){var g=document.documentElement.style,prefix_name=(g.webkitTransition!==undefined)?'-webkit-':(g.MozTransition!==undefined)?'-moz-':(g.OTransition!==undefined)?'-o-':'';transition_name=prefix_name+'transition';return function(b,c,d,e){var f=[],property_to_value=[],property_camelCase=[],unit=[],css,translate3d,AUID,head=document.head||document.getElementsByTagName('head')[0]||document.documentElement;for(css in c){property_camelCase[css]=$string.camelCase(css);if(c[css].from!=null){property_to_value[css]=(!$css.number[css])?parseInt(c[css].to):c[css].to;unit[css]=$css.unit(css,c[css].to);$style.set(b,property_camelCase[css],parseInt(c[css].from)+unit[css])}else{property_to_value[css]=(!$css.number[css])?parseInt(c[css]):c[css];unit[css]=$css.unit(css,c[css]);$style.set(b,property_camelCase[css],$style.get(b,property_camelCase[css]))}f.push(css)}if(c['left']||c['top']){f.push(prefix_name+'transform')}AUID='animation_uid_'+Math.random().toString().replace('0.','');$append(head,$new('style',{'type':'text/css','id':AUID,'html':'.Qatrix_animation{'+transition_name+':all '+d+'ms;}'}));setTimeout(function(){$className.add(b,'Qatrix_animation');if(c['left']||c['top']){var a=$string.camelCase(prefix_name+'transform'),offset=$offset(b);translate3d=(c['left']&&c['top'])?'translate3d('+(property_to_value['left']-offset.left)+unit['left']+','+(property_to_value['top']-offset.top)+unit['top']+',0)':(c['left'])?'translate3d('+(property_to_value['left']-offset.left)+unit['left']+',0,0)':'translate3d(0,'+(property_to_value['top']-offset.top)+unit['top']+',0)';$style.set(b,a,translate3d);$style.set(b,a,'')}for(css in c){$style.set(b,property_camelCase[css],property_to_value[css]+unit[css])}},50);setTimeout(function(){$className.remove(b,'Qatrix_animation');$remove($(AUID));if(e){e()}},d)}})():function(a,b,c,d){var e=[],$step=0,p=30,ori=[],diff=[],unit=[],i=0,css,property_name=[],property_to_value=[],property_camelCase=[],from_value,style_value;for(css in b){property_camelCase[css]=$string.camelCase(css);if(b[css].from!=null){property_to_value[css]=(!$css.number[css])?parseInt(b[css].to):b[css].to;unit[css]=$css.unit(css,b[css].to);from_value=(!$css.number[css])?parseInt(b[css].from):b[css].from;$style.set(a,property_camelCase[css],from_value+unit[css]);diff[css]=(property_to_value[css]-from_value)/p;ori[css]=from_value}else{style_value=parseInt($style.get(a,property_camelCase[css]));property_to_value[css]=(!$css.number[css])?parseInt(b[css]):b[css];unit[css]=$css.unit(css,b[css]);$style.set(a,property_camelCase[css],$style.get(a,property_camelCase[css]));diff[css]=(property_to_value[css]-style_value)/p;ori[css]=style_value}}for(;i<p;++i){e[i]=setTimeout(function(){for(css in b){$style.set(a,property_camelCase[css],(ori[css]+(diff[css]*$step))+unit[css])}$step++},(c/p)*i)}e[p]=setTimeout(function(){for(css in b){$style.set(a,property_camelCase[css],property_to_value[css]+unit[css])}if(d){d()}},c)},$fadeout=function(a,b,c){b=(b)?b:'500';$animate(a,{'opacity':{from:1,to:0}},b,c)},$fadein=function(a,b,c){b=(b)?b:'500';$animate(a,{'opacity':{from:0,to:1}},b,c)},$cookie={get:function(a){var b=document.cookie.split('; '),i=0,l=b.length,temp;for(;i<l;i++){temp=b[i].split('=');if(temp[0]==a){return unescape(temp[1])}}},set:function(a,b,c){var d=new Date(),expires_date;d.setTime(d.getTime());if(c){c=c*86400000}expires_date=new Date(d.getTime()+(c));document.cookie=a+'='+escape(b)+((c)?';expires='+expires_date.toGMTString():'')+'; path=/'},remove:function(){$each(arguments,function(i,a){$cookie.set(a,'',-360)})}},$json={decode:(window.JSON&&window.JSON.parse)?function(a){return JSON.parse(a)}:function(a){return eval('('+a+')')},isJSON:function(a){return Qatrix.rvalidchars.test(a.replace(Qatrix.rvalidescape,'@').replace(Qatrix.rvalidtokens,']').replace(Qatrix.rvalidbraces,''))}},$ajax=function(c,d){if(typeof c==='object'){d=c;c=undefined}d=d||{};var e=(window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject('Microsoft.XMLHTTP'),param=[],type=(d.type!==undefined)?d.type:'POST',response,c;if(e){c=(c)?c:d.url;e.open(type,c,true);e.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=utf-8');if(d.header!==undefined){$each(d.header,function(a,b){e.setRequestHeader(a,b)})}if(d.data!==undefined){$each(d.data,function(a,b){param.push($url(a)+'='+$url(b))})}e.send(param.join('&').replace(/%20/g,'+'));e.onreadystatechange=function(){if(e.readyState==4&&e.status==200){if(d.success!==undefined){response=e.responseText;if(response!=''&&$json.isJSON(response)){d.success($json.decode(response))}else{d.success(response)}}}}}},$loadscript=function(a){var b=document.head||document.getElementsByTagName('head')[0]||document.documentElement;script=$new('script',{'type':'text/javascript','async':true,'src':a});$before(b,script);return script},$url=function(a){return encodeURIComponent(a)},$rand=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)};var $browser={};(function(){var a=navigator.userAgent.toLowerCase(),rbrowser={msie:/msie/,msie6:/msie 6\.0/,msie7:/msie 7\.0/,msie8:/msie 8\.0/,msie9:/msie 9\.0/,msie10:/msie 10\.0/,chrome:/chrome/,firefox:/firefox/,mozilla:/mozilla/,opera:/opera/,webkit:/webkit/,iPad:/ipad/,iPhone:/iphone/,android:/android/},i;for(i in rbrowser){$browser[i]=rbrowser[i].test(a)}})();